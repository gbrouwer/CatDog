# CatDog System Design and Technical Details

---

## ğŸ“‚ Folder Structure

```
/your_project/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ catdog/
â”‚   â”‚   â”œâ”€â”€ agent.py
â”‚   â”‚   â”œâ”€â”€ vibes.py
â”‚   â”‚   â””â”€â”€ modules/
â”‚   â”‚       â”œâ”€â”€ debuggers/
â”‚   â”‚       â”‚   â””â”€â”€ dummies.py
â”‚   â”‚       â””â”€â”€ actuators/
â”‚   â”‚           â””â”€â”€ pcspeaker.py
â”‚   â””â”€â”€ catdog/launchers/
â”‚       â””â”€â”€ module_launcher.py
â”œâ”€â”€ assets/
â”‚   â””â”€â”€ sounds/
â”‚       â””â”€â”€ boot.wav
â”œâ”€â”€ configs/
â”‚   â””â”€â”€ test_local.yaml
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ test_pcspeaker.py
â”œâ”€â”€ setup.py
```

---

## ğŸ› ï¸ Major Components

| Component | Description |
|:---|:---|
| Agent | Starts system, launches modules, monitors health. |
| Vibe System | Broadcasts and listens to heartbeats. |
| Sender/Receiver | WebSocket communication layer. |
| Module Launcher | Spawns modules as subprocesses. |
| Modules | Functional units like DummySensor and PCSpeaker. |

---

## ğŸ§° Key Classes and Responsibilities

- **Agent**: Core system orchestration.
- **VibeSender / VibeListener**: Health monitoring over time.
- **Sender**: WebSocket server emitting messages.
- **Receiver**: WebSocket client receiving messages.
- **ModuleLauncher**: Dynamic module runner.
- **DummySensor**: Periodic dummy message emitters.
- **PCSpeaker**: Plays audio on message trigger.

---

## ğŸ“ Module Lifecycle

1. **boot()**: Self-test hardware or environment.
2. **start()**: Connect or serve WebSocket.
3. **loop()**: Main asynchronous execution loop.
4. **stop()**: Graceful shutdown.

Modules are designed to be as autonomous as possible, minimizing external dependencies.

---

## ğŸ“¢ Messaging Model

| Field | Example |
|:---|:---|
| sender | "DummySensor" |
| content | { "value": 42, "play_sound": true } |

**Message Flow:**
- DummySensor sends dummy data.
- PCSpeaker and DummyActuator receive data.
- PCSpeaker plays sound if `play_sound: true`.

---

## ğŸ“… System Configuration

```yaml
modules:
  dummy_sensor:
    class: catdog.modules.debuggers.dummies.DummySensor
    params:
      host: 127.0.0.1
      port: 9001

  dummy_actuator:
    class: catdog.modules.debuggers.dummies.DummyActuator
    params:
      host: 127.0.0.1
      port: 9002
      upstream:
        host: 127.0.0.1
        port: 9001

  pc_speaker:
    class: catdog.modules.actuators.pcspeaker.PCSpeaker
    params:
      host: 127.0.0.1
      port: 9003
      upstream:
        host: 127.0.0.1
        port: 9001
      sound_path: "assets/sounds/boot.wav"
```

---

## ğŸš§ Failure Modes and Recovery

- **Module Crash**: Subprocess terminates independently; Agent remains alive.
- **No Heartbeat**: Detected by VibeListener; triggers warnings or corrective actions.
- **Communication Loss**: WebSocket reconnection attempts (future feature).

---

## ğŸ“Š Scaling and Future Upgrades

| Phase | Description |
|:---|:---|
| Phase 1 | Single-device multi-module operation (current). |
| Phase 2 | Multi-device LAN deployments (planned). |
| Phase 3 | Geographical cloud deployments. |
| Phase 4 | Fully dynamic auto-scaling network. |

- Add automatic module restarts on crash.
- Introduce encrypted WebSocket communication (TLS).
- Build a live visual dashboard for heartbeat and module status.

---

## ğŸ”„ Best Practices

- Modules should fail fast if not configured properly.
- Keep message schemas lightweight and flexible.
- Document all module parameters clearly in YAML.
- Maintain clean async loops, avoid blocking calls.
- Separate concerns: modules should not "know" too much about each other.

---

# ğŸ† Final Summary

CatDog represents a move away from monolithic, fragile software toward **distributed, fault-tolerant, modular systems**.

By following these principles:
- Modules become small, testable, disposable.
- The Agent manages the forest, not the trees.
- System health becomes visible, actionable, and maintainable.

CatDog is an early glimpse into the future of **living software ecosystems**.
